<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">
    <title>Document</title>
    <style>
        
        * {
            font-family: "Montserrat", serif;
            color: black;
            font-weight: 300px;
            font-size: 15px;
            font-style: normal;
            padding: 0;
            margin: 0;
            box-sizing: border-box;
            list-style: none;
            text-decoration: none;
        }
        body, html {
            height: 100%;
            margin: 0;
            font-family: "Lato", sans-serif;
            overflow: hidden;
        }
        main {
            width: 100%;
            height: 100%;
            background-color: black;
        }

        .primo_div {
            display: flex;
            flex-direction: column;
            gap: 0px;
            height: 100%;
            background-image: url('../img/SearchFlight_img/fotoRicerca.png ');
            background-position: center;
            background-repeat: no-repeat;
            background-size: cover;
            animation: effettoFoto 3s ease-out forwards;
        }
        @keyframes effettoFoto {
            0%{
                opacity: 0;

            }100%{
                opacity: 1;
            }
        }
        .primo_titolo {
            flex: 2;
            display: flex;
            justify-content: center;
            
        }
        .primo_titolo>div {
            align-self: flex-end;
            color: #f7e951;
            font-family: "Montserrat", serif;
            font-size: 86px;
            font-weight: 350;
            font-style: normal;
        }
        .secondo_titolo {
            flex: 3;
            text-align: center;
            font-family: "Montserrat", serif;
            font-size: 136px;
            font-weight: 700;
            font-style: normal;
            color: #f8f8ff;
            text-shadow: 7.35px 3.35px 0px rgba(212, 187, 221, 0.5);
        }
        .form-container {
            flex: 2;
            background-color: #f8f8ff;
            border-radius: 4px;
            border: 3px solid black;
            padding: 20px;
            margin-left: 60px;
            margin-right: 60px;
            margin-bottom: 50px;
            display: flex;
            justify-content: center;
            box-shadow: 7.35px 7.35px 0px rgba(212, 187, 221, 0.5);

        }
        #form-booking, #form-booking-flexdate {
            display: flex;
            flex-direction: column;
            gap: 20px;
            width: 100%;
            align-content: center
        }
        .form_riga1 {
            display: flex;
            justify-content: space-between;
            flex-direction: row;
        }
        .contenuto_riga1 {
            display: flex;
            justify-content: flex-start;
            
        }
        .form_riga2 {
            display: flex;
            gap: 30px;
            flex-direction: row;
            flex-wrap: wrap;
   
        }
        .riga2_ricerca{
            flex:2 1 150px;
        }
        .riga2_ricerca> input[type="text"]{
            width: 100%;
            height: 100%;;
        }
        .form_riga2 input[type="date"]{
            flex: 2 1 150px; 
        }
        .form_riga2 input[type="number"] {
            flex: 1 1 75px ;
        }
        .form_riga3 {
            display: flex;
            justify-content: center;
        }
        button[type="submit"], button[type="button"] {
            padding: 12px 20px;
            font-size: 1em;
            background-color: #f7e951;
            border: 2px solid black;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;

        }
        button[type="submit"]:hover, button[type="button"]:hover {
            background-color: #f7e951;
        }
        .suggerimentiDestinazioni, .suggerimentiPartenze {
            display: none;
            position: absolute;
            background: white;
            border: 1px solid #ccc;
            z-index: 3;
        }
        .suggerimentiDestinazioni div, .suggerimentiPartenze div {
            padding: 5px;
            cursor: pointer;
        }
        .suggerimentiDestinazioni div:hover, .suggerimentiPartenze div:hover {
            background-color: #eee;
        }
    </style>
    
    
</head>
<body>
    <main>
        <div class="primo_div ">
            <div class="text_montserrat primo_titolo"><div>OUTER</div></div>
            <div class="text_montserrat_bold secondo_titolo">SPACE</div>
            <div class="form-container">
                <form id="form-booking" method="post" action="" target="_blank">
                    <div class="form_riga1">
                    <div class="contenuto_riga1">
                        <label for="andataritorno">RoundTrip
                            <input type="radio" name="tipovolo" id="andataritorno" value="andataritorno">
                        </label>
                        <label for="andata" style="margin-left: 20px;">OneWay
                            <input type="radio" name="tipovolo" id="andata" value="andata">
                        </label>
                    </div>
                        <button type="button" id="toggleDivButton">Flex Date</button>
                    </div>
                    <div class="form_riga2">
                        <div class="riga2_ricerca">
                        <input type="text" name="partenza" id="partenza"  autocomplete="off" placeholder="From..." onkeyup="suggerisciPartenze()" onfocus="suggerisciPartenze()" >
                        <div class="suggerimentiPartenze"></div>  </div>
                        <div class="riga2_ricerca">
                        <input type="text" placeholder="To..." name="destinazione"  autocomplete="off" id="destinazione" onkeyup="suggerisciDestinazioni()" onfocus="suggerisciDestinazioni()" required>
                        <div class="suggerimentiDestinazioni"></div> </div>
                         
                        <input type="number" name="numero-biglietto" id="numero-biglietto" min="0"  autocomplete="off" placeholder="Numero persone">
                        <input type="date" id="data-partenza" name="data-partenza">
                        <input type="date" id="data-ritorno" name="data-ritorno">
                    </div>
                    <div class="form_riga3">
                        <button type="submit">Cerca</button>
                    </div>
                </form>
                    <form id="form-booking-flexdate" style="display: none;" method="post" action="" target="_blank">
                        <div class="form_riga1">
                            <div class="contenuto_riga1">
                                <label for="andataritorno">RoundTrip
                                    <input type="radio" name="tipovolo" id="andataritorno" value="andataritorno">
                                </label>
                                <label for="andata">OneWay
                                    <input type="radio" name="tipovolo" id="andata" value="andata">
                                </label>
                            </div>
                                <button type="button" id="dataPrecisaButton">Date</button>
                            </div>
                            <div class="form_riga2">
                                <div class="riga2_ricerca">
                                <input type="text" name="partenza" id="partenza"  autocomplete="off" placeholder="Partenza" onkeyup="suggerisciPartenze()" onfocus="suggerisciPartenze()" >
                                <div class="suggerimentiPartenze"></div>  </div>
                                <div class="riga2_ricerca">
                                <input type="text" placeholder="Destinazione" name="destinazione"  autocomplete="off" id="destinazione" onkeyup="suggerisciDestinazioni()" onfocus="suggerisciDestinazioni()" required>
                                <div class="suggerimentiDestinazioni"></div> </div>
                                 
                                <input type="number" name="numero-biglietto" id="numero-biglietto" min="0" placeholder="Numero persone">
                                <input type="date" id="data-partenza" name="data-partenza">
                                <input type="date" id="data-ritorno" name="data-ritorno">
                            </div>
                            <div class="form_riga3">
                                <button type="submit">Cerca</button>
                            </div>
            
                </form>
            </div>
        </div>
    </main>
</body>
<script>
        document.getElementById('toggleDivButton').addEventListener('click', function() {
            document.getElementById('form-booking').style.display = 'none';
            document.getElementById('form-booking-flexdate').style.display = 'flex';
        });

        document.getElementById('dataPrecisaButton').addEventListener('click', function() {
            document.getElementById('form-booking').style.display = 'flex';
            document.getElementById('form-booking-flexdate').style.display = 'none';
        });


    const destinazioni= ["Mercurio", "Venere", "Terra", "Marte", "Giove", "Saturno", "Urano", "Nettuno"]; 
    function suggerisciDestinazioni() { 
        document.getElementsByClassName("suggerimentiDestinazioni")[0].style.display='block';
        const input = document.getElementById("destinazione").value; 
        const divSuggerimenti = document.getElementsByClassName("suggerimentiDestinazioni")[0]; 
        divSuggerimenti.innerHTML = ''; // Pulisce i suggerimenti precedenti 
        
        if(input==''){
            for (let i = 0; i < destinazioni.length; i++){ 
                const divAusiliare= document.createElement('div');
                divAusiliare.textContent = destinazioni[i]; 
                divAusiliare.addEventListener('click', function() { inserisciSuggerimentoDestinazione(this); });//non ho utilizzato this con la funzione
                //function perche altrimenti si sarebbe riferito all'evento 
                divSuggerimenti.appendChild(divAusiliare);
            }
        }else{
            let risultatiRicerca= destinazioni.filter(ricercaDestinazione);
            for(let i=0; i<risultatiRicerca.length;i++){
                const divAusiliare= document.createElement('div');
                divAusiliare.textContent=risultatiRicerca[i];
                divAusiliare.addEventListener('click', function() { inserisciSuggerimentoDestinazione(this); });
                divSuggerimenti.appendChild(divAusiliare);
            }
        }
    }
    const partenze=["Africa","America","Asia", "Europa", "Oceania"];
    function suggerisciPartenze() { 
        document.getElementsByClassName("suggerimentiPartenze")[0].style.display='block';
        const input = document.getElementById("partenza").value; 
        const divSuggerimenti = document.getElementsByClassName("suggerimentiPartenze")[0]; 
        divSuggerimenti.innerHTML = ''; // Pulisce i suggerimenti precedenti 
        
        if(input==''){
            for (let i = 0; i < partenze.length; i++){ 
                const divAusiliare= document.createElement('div');
                divAusiliare.textContent = partenze[i]; 
                divAusiliare.addEventListener('click', function() { inserisciSuggerimentoPartenza(this); });//non ho utilizzato this con la funzione
                //function perche altrimenti si sarebbe riferito all'evento 
                divSuggerimenti.appendChild(divAusiliare);
            }
        }else{
            let risultatiRicerca= partenze.filter(ricercaPartenza);
            for(let i=0; i<risultatiRicerca.length;i++){
                const divAusiliare= document.createElement('div');
                divAusiliare.textContent=risultatiRicerca[i];
                divAusiliare.addEventListener('click', function() { inserisciSuggerimentoPartenza(this); });
                divSuggerimenti.appendChild(divAusiliare);
            }
        }
    }
    //la funzione viene chiamata per mostrare suggerimenti in base alla stringa inserita nell'input form
    function ricercaDestinazione(pianeta){
        stringa=document.getElementById("destinazione").value.toLowerCase();
       return pianeta.toLowerCase().startsWith(stringa);

    }
    function ricercaPartenza(partenza){
        stringa=document.getElementById("partenza").value.toLowerCase();
       return partenza.toLowerCase().startsWith(stringa);

    }
    //se clicco su un suggerimento, il sistema deve inserire il valore selezionato nel input form
    function inserisciSuggerimentoDestinazione(destinazioneSelezionata){
        document.getElementById('destinazione').value=destinazioneSelezionata.textContent;
        document.getElementsByClassName("suggerimentiDestinazioni")[0].innerHTML = '';//elimino i suggerimenti
    }
    function inserisciSuggerimentoPartenza(partenzaSelezionata){
        document.getElementById('partenza').value=partenzaSelezionata.textContent;
        document.getElementsByClassName("suggerimentiPartenze")[0].innerHTML = '';//elimino i suggerimenti
    }

    //nascondi i suggermenti se clicco da qualche parte
    document.addEventListener('click', function(event) { 
        if (!event.target.matches('#destinazione') && !event.target.closest('.suggerimentiDestinazioni')) {
            document.getElementsByClassName("suggerimentiDestinazioni")[0].style.display = 'none'; 
        } if (!event.target.matches('#partenza') && !event.target.closest('.suggerimentiPartenze')) { 
            document.getElementsByClassName("suggerimentiPartenze")[0].style.display = 'none'; 
        }
    })

   </script>
</html>
